<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title></title>
		<script src="../jquery/jquery-v2.1.0.min.js" type="text/javascript" charset="utf-8"></script>
	</head>
	<body>
		<ul></ul>
		<div class="configHead"></div>
		<textarea style="display:none;">
			<li>
			    <a href="javascript:" data-id="$couponid$">
			        <img src="$imgsrc$" width="240" height="180" />
			        <p>$traffic$</p>
			        <p>$buynum$人购买</p>
			        <div>
			            <div><del class="g6 db">¥$cost$现金券</del>$discount$折</div>
			            <strong class="cr price r pr20">¥$price$</strong>
			        </div>
			        <h3>$resname$</h3>
			    </a>
			</li>
		</textarea>
		<script type="text/javascript">
			j=4,
			console.log(j>>1)
			$(document).ready(function () {
	
	            $('.configHead').load('asdg.html');
	
	        });
			var JSON = {
				url: "ajax.php?author=www.zhangxinxu.com",
				data: [{
					couponid: "111",
					imgsrc: "test1.JPG",
					resname: "俏江南 仙乐斯广场",
					traffic: "肇嘉浜路沿线",
					buynum: 180,
					cost: 100,
					discount: 8.5,
					price: 85
				}, {
					couponid: "222222",
					imgsrc: "222222.jpg",
					resname: "申城五月天",
					traffic: "静安寺",
					buynum: 0,
					cost: 100,
					discount: 8.0,
					price: 80
				}, {
					couponid: "3",
					imgsrc: "go-baby.jpg",
					resname: "申城五月天",
					traffic: "静安寺",
					buynum: 0,
					cost: 100,
					discount: 8.0,
					price: 80
				}, {
					couponid: "3",
					imgsrc: "go-baby.jpg",
					resname: "申城五月天",
					traffic: "静安寺",
					buynum: 0,
					cost: 100,
					discount: 8.0,
					price: 80
				}, {
					couponid: "3",
					imgsrc: "go-baby.jpg",
					resname: "申城五月天",
					traffic: "静安寺",
					buynum: 0,
					cost: 100,
					discount: 8.0,
					price: 80
				}, {
					couponid: "3",
					imgsrc: "go-baby.jpg",
					resname: "申城五月天",
					traffic: "静安寺",
					buynum: 0,
					cost: 100,
					discount: 8.0,
					price: 80
				}, {
					couponid: "3",
					imgsrc: "go-baby.jpg",
					resname: "申城五月天",
					traffic: "静安寺",
					buynum: 0,
					cost: 100,
					discount: 8.0,
					price: 80
				}, {
					couponid: "3",
					imgsrc: "go-baby.jpg",
					resname: "申城五月天",
					traffic: "静安寺",
					buynum: 0,
					cost: 100,
					discount: 8.0,
					price: 80
				}, {
					couponid: "3",
					imgsrc: "go-baby.jpg",
					resname: "申城五月天",
					traffic: "静安寺",
					buynum: 0,
					cost: 100,
					discount: 8.0,
					price: 80
				}, {
					couponid: "3",
					imgsrc: "go-baby.jpg",
					resname: "申城五月天",
					traffic: "静安寺",
					buynum: 0,
					cost: 100,
					discount: 8.0,
					price: 80
				}]
			};
			String.prototype.temp = function(obj) {
				return this.replace(/\$\w+\$/gi, function(matchs) {
//					console.log(matchs)
					var returns = obj[matchs.replace(/\$/g, "")];
					return(returns + "") == "undefined" ? "" : returns;
				});
			};
			var htmlList = ''
				// textarea中的模板HTML
				,
				htmlTemp = $("textarea").val();
//				console.log(htmlTemp)
			JSON.data.forEach(function(data) {
				htmlList += htmlTemp.temp(data);
			});
			// htmlList就是我们需要的HTML代码啦！
			$("ul")[0].innerHTML = htmlList;
		</script>
	</body>
</html>